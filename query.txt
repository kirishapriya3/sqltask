Table Structure:

customers
id (primary key, auto-increment): unique identifier for each customer
name: customer's name
email: customer's email address
address: customer's address

orders
id (primary key, auto-increment): unique identifier for each order
customer_id (foreign key referencing customers.id): a customer who placed the order
order_date: date the order was placed
total_amount: total amount of the order

products
id (primary key, auto-increment): unique identifier for each product
name: product's name
price: product's price
description: product's description
---------------------------------------------------------------------------------------------------------
select * from customers;
create table customers(customer_id int primary key AUTO_INCREMENT,
			customer_name varchar(50),customer_email varchar(50),customer_address varchar(100));

create table orders(order_id int primary key AUTO_INCREMENT,
				customer_id int,
                foreign key(customer_id) references customers(customer_id),
                order_date DATE,
                total_amount decimal(10,2));
            
create table products(product_id int primary key AUTO_INCREMENT,
						product_name varchar(100),
                        product_price decimal(10,2),
                        product_description varchar(300));
insert into customers(customer_id,customer_name,customer_email,customer_address) 
		values(1,'Sheetal','sheetal@16gmail.com','Chennai'),
        (2,'John','john@145gmail.com','Bangalore'),
        (3,'Michael','michael@1gmail.com','Hyderabad'),
        (4,'Shine','shine@13gmail.com','Pune'),
        (5,'Meerut','meerut@14gmail.com','Delhi');
insert into orders(order_id,customer_id,order_date,total_amount) 
			values(1,2,'2026-01-01',200.50),
            (2,3,'2026-01-10',599.20),
            (3,4,'2026-01-24',899.50),
            (4,5,'2026-02-02',2599.99),
            (5,1,'2026-02-11',1299.70);
insert into products(product_id,product_name,product_price,product_description) 
	values(1,'Laptop',89999.88,'High-performance laptop with 16GB RAM and 512GB SSD. Suitable for work and gaming.'),
	(2,'Iphone 15',79999.00,'Latest iPhone with advanced A-series chip, Super Retina display, high-resolution camera, and long-lasting battery.'),
	(3,'Mouse',799.00,'Ergonomic wireless mouse with adjustable DPI, smooth tracking, and comfortable grip for daily use.'),
	(4,'Smartwatch',5999.00,'Stylish smartwatch with heart rate monitoring, fitness tracking, notification alerts, and long battery life.'),
	(5,'TV',45999.00,'55-inch 4K Ultra HD Smart TV with HDR support, built-in apps, and immersive sound system.');
select * from customers;
select * from orders;
select * from products;

1) Retrieve all customers who have placed an order in the last 30 days.
select c.customer_id,c.customer_name,c.customer_email,c.customer_address
	from customers c
	inner join orders o ON c.customer_id = o.customer_id where o.order_date >= CURDATE() - INTERVAL 30 DAY;

2) Get the total amount of all orders placed by each customer.
SELECT c.customer_id,c.customer_name,SUM(o.total_amount) AS total_amount
FROM customers c
JOIN orders o
ON c.customer_id = o.customer_id
GROUP BY c.customer_id,c.customer_name; 

3)Update the price of Product C to 45.00.
UPDATE products
SET product_price = 45.00
WHERE product_id = 3;
select * from products;

4)Add a new column discount to the products table.
ALTER TABLE products
ADD discount DECIMAL(5,2);
UPDATE products SET discount = 30 WHERE product_id = 1;
UPDATE products SET discount = 10 WHERE product_id = 2;
UPDATE products SET discount = 32 WHERE product_id = 3;
UPDATE products SET discount = 7  WHERE product_id = 4;
UPDATE products SET discount = 11 WHERE product_id = 5;
select * from products;

5)Retrieve the top 3 products with the highest price.
select * from products order by product_price desc limit 3; 

6)Get the names of customers who have ordered Product A.
CREATE TABLE order_items (
    order_item_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT,
    product_id INT,
    quantity INT,
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);

INSERT INTO order_items (order_id, product_id, quantity) VALUES
(1,1,1),
(2,2,1),
(3,1,2),
(4,3,1),
(5,4,1);
SELECT DISTINCT c.customer_name
FROM customers c
JOIN orders o ON c.customer_id = o.customer_id
JOIN order_items oi ON o.order_id = oi.order_id
JOIN products p ON oi.product_id = p.product_id
WHERE p.product_name = 'Laptop';

7) Join the orders and customers tables to retrieve the customer's name and order date for each order. 
select c.customer_name,o.order_date from customers c join orders o on c.customer_id = o.customer_id;

8) Retrieve the orders with a total amount greater than 150.00.
select * from orders where total_amount>=150.00;

9) Normalize the database by creating a separate table for order items and updating the orders table to reference the order_items table.
CREATE TABLE order_items (
    order_item_id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT,
    product_id INT,
    quantity INT,
    FOREIGN KEY (order_id) REFERENCES orders(order_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id));
INSERT INTO order_items (order_id, product_id, quantity) VALUES
(1,1,1),
(2,2,1),
(3,1,2),
(4,3,1),
(5,4,1);

10) Retrieve the average total of all orders.
select AVG(total_amount) AS average_order_total FROM orders;
